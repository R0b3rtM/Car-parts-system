package Main_pkg;



import java.util.Scanner;

import com.fasterxml.jackson.databind.ObjectMapper;

import java.io.IOException;
import java.io.File;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.List;

public class car_parts_system {
	
	public static Scanner scan = new Scanner(System.in);
	
	public static void main(String[] args) throws IOException {
		
			boolean isRunning = true;
			int curr_menu = 0;
			
			settings curr_settings = new settings();
			ObjectMapper mapper = new ObjectMapper();
			File conf_file = null;
			
			if(!Files.exists(Paths.get(constants.def_conf_file))) {
				//Handling errors while creating a new Json file
				try {
					conf_file = new File(constants.def_conf_file);
					//Set the default config file
					curr_settings.setFile(conf_file);
					//Create the Json file
					mapper.writerWithDefaultPrettyPrinter().writeValue(conf_file, curr_settings);
					
					
				} catch(IOException e) {
					System.out.println(e.getMessage());
				}
				
			}else {
				//If the file exists, copy the content to settings instance.
				conf_file = Paths.get(constants.def_conf_file).toFile();
				try {
					curr_settings = mapper.readValue(conf_file, settings.class);
				} catch(IOException e) {
					System.out.println(e.getMessage());
				}
			}
			
			
			//List<String> file_lines = Files.readAllLines(Paths.get(null));
			
			//Print application welcome message.
			System.out.println(constants.msg_welc);
			
			//Start the application.
			while(isRunning) {
				switch (curr_menu) {
					case constants.mnu_main:
						System.out.println(constants.msg_menu);
						curr_menu = scan.nextInt();
						break;
						
					case constants.mnu_parts:
						System.out.println(constants.msg_parts);
						curr_menu = scan.nextInt();
						break;
						
					default:
						System.out.println("Incorrect input");
						curr_menu = 0;
						break;
				}
				
			}
			
			scan.close();

		}
	}
