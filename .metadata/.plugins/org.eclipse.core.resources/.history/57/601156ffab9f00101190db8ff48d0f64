package Main_pkg;

import java.util.Scanner;

public class UserInterface {
	
	private static FilesHandler files_handler = new FilesHandler();
	private static Scanner scan = new Scanner(System.in);
	
	public static void main_menu_interface() {
		boolean isRunning = true;
		int curr_menu = 0;
		
		//Initiate configuration file
		files_handler.conf_initiation();
		
		while(isRunning) {
			switch (curr_menu) {
				case Constants.mnu_main:
					System.out.println(Constants.msg_menu);
					curr_menu = scan.nextInt();
					console_clear();
					break;
					
				case Constants.mnu_parts:
					parts_database_interface();
					curr_menu = 0;
					console_clear();
					break;
					
				case Constants.database_upload:
					//Upload new database
					upload_database_interface();
					curr_menu = 0;
					console_clear();
					break;
					
				case Constants.database_reset:
					//Reset to default database
					files_handler.setDataFile(Constants.def_db_file);
					curr_menu = 0;
					break;
					
				default:
					System.out.println("Incorrect input");
					curr_menu = 0;
					console_clear();
					break;
			}
			
		}
		scan.close();
	}
	
	private static void upload_database_interface() {
		String read_line;
		
		scan.nextLine();
		
		System.out.println(Constants.msg_database_upload);
		read_line = scan.nextLine();
		files_handler.setDataFile(read_line);				
	}

	private static void parts_database_interface() {
		boolean return_to_main = false;
		int option = Integer.MAX_VALUE;
		String read_line;
		
		//consume the leftover '\n' that left from the 'nextInt()'
		scan.nextLine();
		
		while(return_to_main == false) {
			//Initiate data file/ upload data file
			files_handler.data_file_init();
			
			//Get input from user
			read_line = scan.nextLine();
			
			//Process the input
			if(read_line.isEmpty()) {
				return_to_main = true;
			}else {
				try {
					option = Integer.parseInt(read_line);
				} catch (NumberFormatException e) {
					return_to_main = true;
				}
			}
			
			//Option choose
			switch (option) {
				case Constants.part_add:
					//Adding part to the database
					add_part();
					console_clear();
					break;
				case Constants.part_remov:
					//Remove part from the database
					remove_part();
					console_clear();
					break;
				case Constants.page_next:
					//Show next page of the database
					break;
				case Constants.page_prev:
					//Show previous page of the database
					break;
				case Constants.main_menu:
					return_to_main = true;
				default:
					//return to main menu
					System.out.println("Invalid option number\n");
					break;
			}
		}
	}
	
	private static void remove_part() {
		String read_line;
		
		System.out.println(Constants.msg_part_remove);
		read_line = scan.nextLine();
		
		files_handler.remove_part_from_database(read_line);
		
	}

	private static void add_part() {
		
		String[] part_info = new String[5];
		String read_line;
		
		//Start user dialog to get the part info
		for(int i = 0; i<5; i++) {
			System.out.println("Enter the " + Constants.part_info[i] + ": ");
			read_line = scan.nextLine();
			part_info[i] = read_line;
		}
		
		files_handler.add_part_to_database(part_info);
		
	}
	
	private static void console_clear() {
		for(int i=0; i<50; i++) System.out.println();
	}
}
